static int megasas_dcmd_ld_get_list(MegasasState *s, MegasasCmd *cmd) struct mfi_ld_list info ; size_t dcmd_size = sizeof ( info ) , resid ; memset ( & info , 0 , dcmd_size ); info . ld_list [ num_ld_disks ] . ld . v . target_id = sdev -> id; info . ld_list [ num_ld_disks ] . state = MFI_LD_STATE_OPTIMAL; info . ld_list [ num_ld_disks ] . size = cpu_to_le64 ( ld_size ); num_ld_disks ++; info . ld_count = cpu_to_le32 ( num_ld_disks ); trace_megasas_dcmd_ld_get_list ( cmd -> index , num_ld_disks , max_ld_disks ); resid = dma_buf_read ( ( uint8_t * ) & info , dcmd_size , & cmd -> qsg ); cmd -> iov_size = dcmd_size - resid; 