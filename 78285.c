void build_output_lut(struct curveType uint16_t **output_gamma_lut, size_t *output_gamma_lut_length) if ( trc -> type == PARAMETRIC_CURVE_TYPE )  uint16_t * output = malloc ( sizeof ( uint16_t ) * 256 ) ; if ( ! output )  output [ i ] = ( uint16_t ) ( gamma_table [ i ] * 65535 ); * output_gamma_lut = output; * output_gamma_lut = build_linear_table ( 4096 ); static uint16_t *build_linear_table(int length) uint16_t * output = malloc ( sizeof ( uint16_t ) * length ) ; if ( ! output )  for (i = 0; i < length; i++) double x = ( ( double ) i * 65535. ) / ( double ) ( length - 1 ) ; uint16_fract_t input = floor ( x + .5 ) ; output [ i ] = input; return output ; 