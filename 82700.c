static brcmf_cfg80211_mgmt_tx(struct wiphy *wiphy, struct wireless_dev struct cfg80211_mgmt_tx_params *params, u64 *cookie) const u8 * buf = params -> buf ; const struct ieee80211_mgmt * mgmt ; struct brcmf_fil_af_params_le * af_params ; mgmt = ( const struct ieee80211_mgmt * ) buf; if ( ! ieee80211_is_mgmt ( mgmt -> frame_control ) )  if ( ieee80211_is_probe_resp ( mgmt -> frame_control ) )  if ( ieee80211_is_action ( mgmt -> frame_control ) )  af_params = kzalloc ( sizeof ( * af_params ) , GFP_KERNEL ); if ( af_params == NULL )  memcpy ( & af_params -> bssid [ 0 ] , & mgmt -> bssid [ 0 ] , ETH_ALEN ); af_params -> channel = cpu_to_le32 ( chan_nr ); ack = brcmf_p2p_send_action_frame ( cfg , cfg_to_ndev ( cfg ) , af_params ); cfg80211_mgmt_tx_status ( wdev , * cookie , buf , len , ack , GFP_KERNEL ); kfree ( af_params ); 