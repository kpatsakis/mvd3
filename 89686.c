static void brcmf_cfg80211_reg_notifier(struct wiphy struct regulatory_request *req) struct brcmf_cfg80211_info * cfg = wiphy_priv ( wiphy ) ; struct brcmf_if * ifp = netdev_priv ( cfg_to_ndev ( cfg ) ) ; s32 err ; int i ; for (i = 0; i < sizeof(req->alpha2); i++) if ( req -> alpha2 [ i ] < 'A' || req -> alpha2 [ i ] > 'Z' )  err = brcmf_fil_iovar_data_get ( ifp , "country" , & ccreq , sizeof ( ccreq ) ); if ( err )  err = brcmf_translate_country_code ( ifp -> drvr , req -> alpha2 , & ccreq ); static s32 brcmf_translate_country_code(struct brcmf_pub *drvr, char struct brcmf_fil_country_le *ccreq) struct brcmfmac_pd_cc * country_codes ; struct brcmfmac_pd_cc_entry * cc ; s32 found_index ; int i ; country_codes = drvr -> settings -> country_codes; if ( ! country_codes )  if ( ( alpha2 [ 0 ] == ccreq -> country_abbrev [ 0 ] ) && ( alpha2 [ 1 ] == ccreq -> country_abbrev [ 1 ] ) )  found_index = - 1; for (i = 0; i < country_codes->table_size; i++) cc = & country_codes -> table [ i ]; if ( ( cc -> iso3166 [ 0 ] == '\0' ) && ( found_index == - 1 ) )  found_index = i; if ( ( cc -> iso3166 [ 0 ] == alpha2 [ 0 ] ) && ( cc -> iso3166 [ 1 ] == alpha2 [ 1 ] ) )  found_index = i; if ( found_index == - 1 )  memset ( ccreq , 0 , sizeof ( * ccreq ) ); ccreq -> rev = cpu_to_le32 ( country_codes -> table [ found_index ] . rev ); memcpy ( ccreq -> ccode , country_codes -> table [ found_index ] . cc , BRCMF_COUNTRY_BUF_SZ ); ccreq -> country_abbrev [ 0 ] = alpha2 [ 0 ]; ccreq -> country_abbrev [ 1 ] = alpha2 [ 1 ]; ccreq -> country_abbrev [ 2 ] = 0; 